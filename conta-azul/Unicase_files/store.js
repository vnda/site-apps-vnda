var spaceToHeaderFixed,$window=$(window),$body=$("body"),page=$body.data("page"),$header=$("#header"),$wrapper=$("#wrapper"),language=$("html").attr("lang"),timeTransitionDefault=350,texts=[];function getText(e,t){return void 0===t?texts[language][e]:texts[language][e][t]}texts["pt-BR"]={quantity:"quantidade",price:"preço",cart_empty:"O seu carrinho está vazio",go_product:"Ir para a página do produto",btn_edit_cart:"Editar pedido",btn_checkout:"Finalizar pedido",btn_success:"Adicionado!",errorsTxt:{withoutSku:"Selecione um atributo para o produto"}};var store={config:{selectorBtnBuy:'[data-action="add-cart"]',selectorWrapperProduct:"[data-box-produto]",selectorFormProduct:"[data-form-product]",hasInternacionalVersion:!1,errorsTxt:{withoutSku:getText("errorsTxt","withoutSku")},addToCartOpenCartpopup:!1,addToCartOpenCartpopupMobile:!1,cartCount:{selector:"[data-cart-count]",attr:"[data-cart-count-attr]",text:"[data-cart-item-text]",textLabel:"[data-cart-item-text-label]"}},formatMoney:function(e){return"R$ "+e.toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+\,)/g,"$1.")},validateQuantity:function(e){return!isNaN(e)&&parseInt(e)>0},getClearNumber:function(e){return!isNaN(e)&&(clearNumber=parseInt(e),clearNumber)},validateFormProduct:function(e){e.closest("[data-box-produto]");var t=!0,o=[];return"false"==e.find('[data-action="add-cart"]').data("available")?(t=!1,o.push("")):(""==e.find('[name="sku"]').val()&&(t=!1,o.push("Selecione um atributo para o produto")),console.log(e.find('input[name="quantity"]').val()),e.find('input[name="quantity"]').val()<=0&&(console.log("qtd invalida"),t=!1,o.push("Quantidade indisponível"))),{validated:t,errors:o}},setRespValidateProduct:function(e,t,o){var a=o,n="";if(e.validated)a.empty();else{for(var r=e.errors.length-1;r>=0;r--)n+='<span class="msg error">'+e.errors[r]+"</span>";a.html(n),$("html,body").animate({scrollTop:a.offset().top+100},"250")}},addItemResultDefault:function(e,t,o,a){if("produto-adicionado"==t){var n=e.find(this.config.selectorBtnBuy);n.addClass("success").html("Produto adicionado!"),setTimeout(function(){n.removeClass("success").html(n.data("text-available"))},3500),setTimeout(function(){window.location.href=urlCart},150)}else if("erro-adicionar"==t){var r=JSON.parse(o.responseText);void 0!==a&&a.length>0&&($("html,body").animate({scrollTop:a.offset().top},"250"),console.info(r),a.addClass("error"),a.removeClass("success"),a.find("span").html(r.error),a.slideDown(350),setTimeout(function(){a.slideUp(350)},3500))}},addItem:function(e,t,o){var a=this,n=t.find('[data-action="add-cart"]'),r=e.serialize(),i=t.find("[data-form-product] .msg-response:not(.resp-validate)");console.info("addItem"),console.info("addItem",e.serializeArray()),n.hasClass("adding")||$.ajax({url:"/carrinho/adicionar",type:"POST",dataType:"json",data:r,beforeSend:function(){n.addClass("adding")}}).done(function(t){console.log("success"),console.info(t),"function"==typeof o?o(e,"produto-adicionado",t,i):a.addItemResultDefault(e,"produto-adicionado",t,i)}).fail(function(t){console.log("error"),console.error(t),console.error(t.responseText),console.error(t.responseText.error),"function"==typeof o?o(e,"erro-adicionar",t,i):a.addItemResultDefault(e,"erro-adicionar",t,i)}).always(function(){console.log("complete"),n.removeClass("adding")})},deleteItem:function(e,t,o){t.hasClass("removing")||$.ajax({url:"/carrinho",type:"POST",dataType:"json",data:{_method:"delete",item_id:e},beforeSend:function(){t.addClass("removing")}}).done(function(e){console.log("success"),"function"==typeof o&&o(t,e)}).fail(function(e){console.log("erro ao remover",e.responseText)}).always(function(){t.removeClass("removing")})},setMsgResponse:function(e,t,o){if(Array.isArray(e)){var a=e;e="";for(var n=a.length-1;n>=0;n--)e+='<span class="msg error">'+a[n]+"</span>"}o.find("[data-msg-retorno]").removeClass("success").removeClass("warning").removeClass("error"),o.find("[data-msg-retorno] [data-msg]").empty(),"clear"!=t&&(o.find("[data-msg-retorno]").addClass(t),o.find("[data-msg-retorno] [data-msg]").html(e))},updateCartCount:function(e){var t=this;$(t.config.cartCount.attr).data("cart-count-attr",e),$(t.config.cartCount.attr).attr("data-cart-count-attr",e),$(t.config.cartCount.text).html(e),$(t.config.cartCount.textLabel).html(e>1?"itens":"item")},submitForm:function(e){e.find('[name="reply_to"]').val(e.find('[name="email"]').val()),e.hasClass("sending")||$.ajax({url:"/webform",type:"POST",data:e.serialize(),beforeSend:function(){e.addClass("sending")}}).done(function(){e.find("button[type=submit]").text("Enviado"),setTimeout(function(){e.find("button[type=submit]").text("Enviar")},3500),e[0].reset()}).fail(function(){e.find("button[type=submit]").text("Falha ao enviar"),setTimeout(function(){e.find("button[type=submit]").text("Enviar")},3500)}).always(function(){console.log("complete"),e.removeClass("sending")})},login:{validateLogin:function(e){var t=!0,o=[];return""==e.find('[name="email"]').val()&&(t=!1,o.push("Informe seu email!")),""==e.find('[name="password"]').val()&&(t=!1,o.push("Informe a senha!")),{validated:t,errors:o}},validateRegister:function(e){var t=!0,o=[];(""==e.find('[name="email"]').val()&&(t=!1,o.push("Informe seu email!")),""==e.find('[name="password"]').val()&&(t=!1,o.push("Informe uma senha!")),""!=e.find('[name="password"]').val())&&(e.find('[name="password"]').val()!=e.find('[name="password_confirmation"]').val()&&(t=!1,o.push("Senha e confirmação são diferentes!")));return{validated:t,errors:o}},validateRecover:function(e){var t=!0,o=[];return""==e.find('[name="email"]').val()&&(t=!1,o.push("Informe seu email!")),{validated:t,errors:o}},logar:function(e){e.hasClass("sending")||$.ajax({url:"/entrar",type:"POST",dataType:"json",data:e.serialize(),beforeSend:function(){e.addClass("sending")}}).done(function(t){console.log("success",t),t.error&&store.setMsgResponse(t.error,"error",e),t.client&&(window.location.href=t.redirect_to)}).fail(function(e){console.error("error",error.responseText)}).always(function(){console.log("complete"),e.removeClass("sending")})},recoverPassord:function(e){e.hasClass("sending")||$.ajax({url:"/recuperar_senha",type:"POST",dataType:"json",data:e.serialize(),beforeSend:function(){e.addClass("sending")}}).done(function(t){console.log("success",t),t.error&&store.setMsgResponse(t.error,"error",e),t.ok&&store.setMsgResponse(t.ok,"success",e)}).fail(function(e){console.error("error",error.responseText)}).always(function(){console.log("complete"),e.removeClass("sending")})}},init:function(){$("[data-webform]").on("submit",function(e){e.preventDefault();var t=$(this).find('[name="honeypot"]');if(t.length>0&&""!=t.val())return console.info("ROBOT DETECTED"),!1;if("contato"==$(this).data("webform")){var o=_this.validateFormContato($(this));console.info("FORM DE CONTATO",o),o.validated?(store.submitForm($(this)),store.setMsgResponse(!1,"clear",$(this))):store.setMsgResponse(o.errors,"error",$(this))}else store.submitForm($(this))})}};store.init(),$(function(){var e={headerCart:{setHtmlWihoutProducts:function(){return'<h3 class="title cart-empty">'+store.getText("cart_empty")+"</h3>"},setHtmlItems:function(e){var t="";return console.log(e),$.each(e,function(e,o){t+='<li class="item item_'+o.id+'"><div class="thumb"><a href="'+o.product_url+'" title="'+o.product_name+'"><img src="'+o.image_url+'" alt="'+o.product_name+'"></a></div><div class="info"><h4 class="product-name"><a href="'+o.product_url+'" title="'+o.product_name+'">'+o.product_name+'</a></h4><span class="price">'+o.variant_name+" - "+store.formatMoney(o.price)+"</span></div></li>"}),t},loadCart:function(e){var t="",o=$(".modal-body");store.formatMoney(e.total),store.formatMoney(e.subtotal);e.items_count>0?t='<ul class="minicart-list">'+this.setHtmlItems(e.items)+'</ul><div class="subtotal">Subtotal: <span class="amount">'+store.formatMoney(e.subtotal)+'</span></div><div class="group-buttons"><a href="/carrinho" class="button primary checkout-button">Finalizar compra</a></div>':t=this.setHtmlWithoutProducts();o.empty(),o.append(t),store.updateCartCount(e.items_count)},show:function(){$(".modal-cart").addClass("open"),$(".modal-confirma").removeClass("active"),$("html,body").animate({scrollTop:0},"250")}},addItemResult:function(t,o,a,n){e.headerCart.loadCart(a),e.headerCart.show()},setMenuMobile:function(){$("#menu-mobile").mmenu({slidingSubmenus:!0,extensions:["pagedim-black"],navbar:{add:!0}},{offCanvas:{pageSelector:"#wrapper"}}),mmenu=$("#menu-mobile").data("mmenu"),$('[data-action="open-menu-mobile"]').on("click",function(e){e.preventDefault(),$("#menu-mobile").hasClass("mm-opened")?mmenu.close():mmenu.open()})},login:{init:function(){$("[data-content-login]").each(function(e,t){$(t).on("click","[data-forget-password]",function(e){e.preventDefault(),$(t).find(".wrapper-form-login").animate({height:"toggle"},500),$(t).find(".wrapper-form-recover").animate({height:"toggle"},500)}),$(t).on("click","[data-forget-password-back]",function(e){e.preventDefault(),$(t).find(".wrapper-form-login").animate({height:"toggle"},500),$(t).find(".wrapper-form-recover").animate({height:"toggle"},500)}),$(t).on("click","[data-abre-login]",function(e){e.preventDefault(),$(t).find(".box-register").animate({height:"toggle"},500),$(t).find(".box-login").animate({height:"toggle"},500)}),$(t).on("click","[data-abre-cadastro]",function(e){e.preventDefault(),$(t).find(".box-login").animate({height:"toggle"},500),$(t).find(".box-register").animate({height:"toggle"},500)}),$(t).on("submit","[data-form-login]",function(e){e.preventDefault();var t=$(this),o=store.login.validateLogin(t);o.validated?store.login.logar(t):store.setMsgResponse(o.errors,"error",$(this))}),$(t).on("submit","[data-form-register]",function(e){e.preventDefault();var t=$(this),o=store.login.validateRegister(t);o.validated?store.login.logar(t):store.setMsgResponse(o.errors,"error",$(this))}),$(t).on("submit","[data-form-recover]",function(e){e.preventDefault();var t=$(this),o=store.login.validateRecover(t);o.validated?store.login.recoverPassord(t):store.setMsgResponse(o.errors,"error",$(this))})}),$('[data-action="login-user"]').click(function(e){e.preventDefault(),$(".modal-login").addClass("open")}),$('[data-action="open-cart"]').click(function(e){e.preventDefault(),$(".modal-cart").addClass("open")}),$('[data-action="open-search"]').click(function(e){e.preventDefault(),$(".modal-search").addClass("open")}),$(".modal-login .close").click(function(){$(".modal-login").removeClass("open")}),$(".modal-cart .close").click(function(){$(".modal-cart").removeClass("open")}),$(".modal-search .close").click(function(){$(".modal-search").removeClass("open")})}},product:{init:function(){$(document).on("submit",store.config.selectorFormProduct,function(t){t.preventDefault(),$(".modal-confirma").addClass("active"),$(".modal-confirma .modelo").text($('[name="second-attribute"]:checked').val()),$(".confirmar").click(function(){var t=$("[data-form-product]"),o=t.closest(store.config.selectorWrapperProduct);console.info(t),console.info(o);o.find(store.config.selectorBtnBuy);var a=store.validateFormProduct(t),n=o.find(".resp-validate");a.validated?store.addItem(t,o,function(t,o,a,n){e.addItemResult(t,o,a,n)}):(console.info("não foi"),store.setRespValidateProduct(a,t,n))}),$(".sair").click(function(e){e.preventDefault(),$(".modal-confirma").removeClass("active")})}),$('[data-action="open-personalização"]').click(function(e){e.preventDefault(),$(".modal-personalizacao").addClass("open")}),$(".modal-personalizacao .close").click(function(){$(".modal-personalizacao").removeClass("open")})}},init:function(){e.setMenuMobile()}};e.init(),"product"==page&&e.product.init(),e.login.init(),"home"==page&&$(document).ready(function(){function e(e){var t=e.offset(),o=-($window.scrollTop()-t.top)/e.data("speed")+"px";e.css("background-position-y",o)}$(".slider").slick({dots:!1,infinite:!0,slidesToScroll:1,autoplay:!0,prevArrow:$(".banner").find(".prev"),nextArrow:$(".banner").find(".next"),arrows:!0}),$(".parallax-bg").each(function(t,o){var a=$(this),n=(t=$(".banner .parallax-bg").index(this),$(o).width());$(o).css("background-position-x",t*n),e(a),$window.scroll(function(t){e(a)})})}),$(document).ready(function(e){window.history&&window.history.pushState&&(window.history.pushState("forward",null,""),e(window).on("popstate",function(){window.location=document.referrer}))})});